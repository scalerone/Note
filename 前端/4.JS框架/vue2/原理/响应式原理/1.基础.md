# 基础

## 参考

>vue官方阐述：<https://cn.vuejs.org/v2/guide/reactivity.html>

## 概述

+ 响应式数据的最终目标，是当对象本身或对象属性发生变化时，将会运行一些函数，最常见的就是render函数

## vue 核心部件

+ Observer
+ Dep
+ Watcher
+ Scheduler

## Observer

+ Observer要实现的目标非常简单，就是把一个普通的对象转换为响应式的对象

+ 为了实现这一点，Observer把对象的每个属性通过 `Object.defineProperty` 转换为带有 `getter` 和 `setter` 的属性，这样一来，当访问或设置属性时，vue就有机会做一些别的事情

  ```txt
  原始对象 --> Observer --> 响应式对象(getter 、setter)
  ```

+ Observer是vue内部的构造器，我们可以通过Vue提供的静态方法 `Vue.observable( object )` 间接的使用该功能。

+ 在组件生命周期中，这件事发生在 `beforeCreate` 之后，`created` 之前。

+ 具体实现上，它会递归遍历对象的所有属性，以完成深度的属性转换。

+ 由于遍历时只能遍历到对象的当前属性，因此无法监测到将来动态增加或删除的属性，因此vue提供了 `$set` 和 `$delete` 两个实例方法，让开发者通过这两个实例方法对已有响应式对象添加或删除属性。

+ 对于数组，vue会更改它的隐式原型，之所以这样做，是因为vue需要监听那些可能改变数组内容的方法

  ![数组](images/数组.png)

+ 总之，Observer的目标，就是要让一个对象，它属性的读取、赋值，内部数组的变化都要能够被vue感知到
