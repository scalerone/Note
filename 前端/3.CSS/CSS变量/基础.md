# 基础

## var()

*   要使用一个变量的值，需要使用 `var()` 函数，并将变量的名称作为参数传入

*   使用：\`\`

    ```css
    var(--*, 默认值?)
    ```

    ```css
    var( <custom-property-name> [, <declaration-value> ]? )
    /*<custom-property-name> 自定义属性名*/
    /*<declaration-value> 声明值（回退值）*/
    ```

*   `var()` 函数可以代替元素中任何属性中的值的任何部分

*   `var()` 函数接受两个参数

    *   参数1：是要替换的自定义属性的名称

    *   参数2：是可选的，作为参数一无效时候的回退值。

## var 默认值

*   默认值：如果我们使用的变量没有定义（注意，**仅限于没有定义**），则使用后面的值作为元素的属性值。

    ```css
    .box {
      --1: #369;
    }
    body {
      background-color: var(--1, #cd0000);
    }
    ```

*   对于CSS变量，只要语法是正确的，就算变量里面的值是个乱七八糟的东西，也是会作为正常的声明解析，

*   如果发现变量值是不合法的，则使用背景色的缺省值，也就是 **默认值** 代替，

    ```css
    body {
      --color: 20px;
      background-color: #369;
      background-color: var(--color, #cd0000);
    }
    /* 此时<body>的背景色是 transparent */
    ```

## 命名

*   命名没有限制

    ```css
    :root {
      --1: #369;
    }
    body {
      background-color: var(--1);
    }
    ```

*   不能包含 `$` ，`[` ，`^` ，`(` ，`%` 等字符，

*   普通字符局限在只要是 “数字\[0-9]” 、 “字母\[a-zA-Z]” 、 “下划线 \_”和 “短横线-” 这些组合，但是可以是中文，日文或者韩文

    ```css
    body {
      --深蓝: #369;
      background-color: var(--深蓝);
    }
    ```

*   长命名方式

    ```css
    :root {
      --unit: 20vmin;
      --gutter: calc(0.02 * var(--unit));
      --tile-color: #A7D3EB;
    }
    .tile1 {
      width: calc(var(--unit) * 2);
      height: calc(var(--unit) * 0.33);
      margin: var(--gutter);
      background-color: var(--tile-color);
    }
    ```

*   变量名称必须以 `--` 开头

*   变量只能存储一个属性的值，而不能用来存储一个属性

    ```css
    /* 错误示例 */
    p {
      --primary-color: color;
      var(--primary-color) : #6bc30d
    }
    ```

## calc

*   变量中无法使用加减等数学方法，如果需要使用计算，则可以使用 `calc` 函数

    ```css
    /*这样是错误的*/
    p {
      --font-size : 20px * 2;
      font-size: var(--font-size);
    }

    /*这样是正确的*/
    p {
      --font-size : calc(20px * 2);
      font-size: var(--font-size); /*40px*/
    }

    /*这样拼接也是无效的*/
    p {
      --font-size: 20;
      font-size: var(--font-size)px; /*无效*/
    }

    /*这样是有效的：*/
    p {
      --font-size: 20;
      font-size: calc(var(--font-size) * 1px); /*20px*/
    }
    ```

## 示例

*   示例1：随着浏览器宽度减小，4栏可能就变成3栏，2栏甚至1栏，

    ```css
    box {
      --columns: 4;
      --margins: calc(24px / var(--columns));
      --space: calc(4px * var(--columns));
      --fontSize: calc(20px - 4 / var(--columns));
    }
    @media screen and (max-width: 1200px) {
      .box {
          --columns: 3;
      }
    }
    @media screen and (max-width: 900px) {
      .box {
        --columns: 2;
      }
    }
    @media screen and (max-width: 600px) {
      .box {
        --columns: 1;
      }
    }
    ```
