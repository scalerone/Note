# 宏任务与微任务

## 作用

+ 正常情况下，JavaScript的任务是同步执行的，即执行完前一个任务，然后执行后一个任务。只有遇到异步任务的情况下，执行顺序才会改变

+ 这时，需要区分两种任务：正常任务（task）与微任务（microtask）。它们的区别在于，“正常任务”在下一轮Event Loop执行，“微任务”在本轮Event Loop的所有任务结束后执行

  ```js
  console.log(1);

  setTimeout(function() {
    console.log(2);
  }, 0);

  Promise.resolve().then(function() {
    console.log(3);
  }).then(function() {
    console.log(4);
  });

  console.log(5);

  // 1
  // 5
  // 3
  // 4
  // 2
  ```

## 宏任务

+ `setTimeout`

+ `setInterval`

+ `setImmediate`

+ I/O

+ 各种事件（比如鼠标单击事件）的回调函数

## 微任务

+ `process.nextTick`

+ `Promise`
