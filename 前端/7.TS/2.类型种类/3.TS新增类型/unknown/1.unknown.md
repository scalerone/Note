# unknown

## 概述

  - 我们可以使用集合来理解 `never`，`unknown`  是全集，`never` 是最小单元（空集），任意类型都包含了 `never`

  - `unknown` — 表示万物

    ![](image/image_pocVeDiZGi.png)

## 使用 unknown

  1. 相比 `any` 类型，TypeScript 会对 `unknown` 类型的变量执行类型检查

    ```ts
    function invokeCallback(callback: unknown) {
      try {
        // Object is of type 'unknown'.(2571)
        callback(); // Error
      } catch (err) {
        console.error(err)
      }
    }

    // 解决办法
    function invokeCallback(callback: unknown) {
      try {
        if (typeof callback === 'function') {
          callback();
        }
      } catch (err) {
        console.error(err)
      }
    }

    invokeCallback(1);
    ```

  2. 在实际工作中，你还可以通过 instanceof 或用户自定义类型守卫等方式来缩窄变量的类型

    ```ts
    declare function isFunction(x: unknown): x is Function;

    function f20(x: unknown) {
      if (x instanceof Error) {
        x;  // Error
      }
      if (isFunction(x)) {
        x;  // Function
      }
    }
    ```

  3. 用类型断言缩小未知范围

    ```ts
    const getDogName = () => {
      let x: unknown;
      return x;
    };

    const dogName = getDogName();
    console.log((dogName as string).toLowerCase());
    ```

## 联合类型

  - 如果联合类型中有 `unknown` ，那么最终得到的都是 `unknown` 类型

    ```ts
    type U1 = unknown | null;
    type U2 = unknown | string;
    type U3 = unknown | number;

    // 类型别名 U1,U2,U3 都是 unknown 类型
    ```

## keyof unknown

  - 用 keyof 操作符对 `any` 和 `unknown` 进行操作：

      - `keyof any`：是 `string | number | symbol` 的联合类型

      - `keyof unknown`：是 `never` 类型
