# JSDoc

## 概述

+ TypeScript 直接处理 JS 文件时，如果无法推断出类型，会使用 JS 脚本里面的 JSDoc 注释

## 使用要求

+ 使用 JSDoc 时，有两个基本要求。

  1. JSDoc 注释必须以 `/**` 开始，其中星号（`*`）的数量必须为两个。若使用其他形式的多行注释，则 JSDoc 会忽略该条注释。

  2. JSDoc 注释必须与它描述的代码处于相邻的位置，并且注释在上，代码在下

  ```js
  /**
   * @param {string} somebody
   */
  function sayHello(somebody) {
    console.log('Hello ' + somebody);
  }
  ```

## `@typedef` 类型别名

+ `@typedef` 命令创建自定义类型，等同于 TypeScript 里面的类型别名

  ```js
  /**
   * @typedef {(number | string)} NumberLike
   */

  // 等同于 TypeScript 的如下语句
  type NumberLike = string | number;
  ```

## `@type` 定义变量

+ `@type` 命令定义变量的类型

  ```js
  // 定义了变量a的类型为string
  /**
   * @type {string}
   */
  let a;
  ```

+ `@type` + `@typedef`

  ```js
  /**
   * @typedef {(number | string)} NumberLike
   */

  /**
   * @type {NumberLike}
   */
  let a = 0;
  ```

+ 在 `@type` 命令中允许使用 TypeScript 类型及其语法

  ```js
  /**@type {true | false} */
  let a;

  /** @type {number[]} */
  let b;

  /** @type {Array<number>} */
  let c;

  /** @type {{ readonly x: number, y?: string }} */
  let d;

  /** @type {(s: string, b: boolean) => number} */
  let e;
  ```

## `@param` 函数参数类型

+ `@param` 命令用于定义函数参数的类型

  ```js
  /**
   * @param {string}  x
   */
  function foo(x) {}
  ```

+ 如果是可选参数，需要将参数名放在方括号`[]`里面

  ```js
  /**
   * @param {string}  [x]
   */
  function foo(x) {}
  ```

+ 方括号里面，还可以指定参数默认值

  ```js
  /**
   * @param {string}  [x="bar"]
   */
  function foo(x) {}
  ```

## @return，@returns 函数返回值的类型

+ `@return` 和 `@returns` 命令的作用相同，指定函数返回值的类型

  ```js
  /**
   * @return {boolean}
   */
  function foo() {
    return true;
  }

  /**
  + @returns {number}
   */
  function bar() {
    return 0;
  }
  ```

## `@extends` 和类型修饰符

+ `@extends` 命令用于定义继承的基类

  ```js
  /**
   * @extends {Base}
   */
  class Derived extends Base {
  }
  ```

+ `@public`、`@protected`、`@private` 分别指定类的公开成员、保护成员和私有成员

+ `@readonly` 指定只读成员

  ```js
  class Base {
    /**
     * @public
    * @readonly
    */
    x = 0;

    /**
     *  @protected
    */
    y = 0;

  }
  ```
